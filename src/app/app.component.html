<h1>
  Salsa Beat Machine 5
</h1>

<div *ngIf="machine">
  <input type="range" [(ngModel)]="machine.bpm" min="80" max="250" /> {{machine.bpm}} BPM
  <div>
    <button (click)="engine.start()">Play</button>
    <button (click)="engine.stop()">Stop</button>
  </div>
  <div>
    <span [hidden]="!engine.playing">
      {{beatIndex()}}
    </span>
    <span [hidden]="engine.playing">
      -
    </span>
  </div>

  <div>
    <div *ngFor="let instrument of machine?.instruments">
      {{instrument.title}}
      <input type="checkbox" [(ngModel)]="instrument.enabled"> {{instrument.activeProgram}}
      <select [(ngModel)]="instrument.activeProgram">
        <option *ngFor="let p of instrument.programs; let i = index" [value]="i">
          {{p.title}}
        </option>
      </select>
      <input [(ngModel)]="instrument.volume" type="range" min="0" max="1.0" step="0.1" />
    </div>
  </div>
</div>
